% This file should only be \input{} in a document that loads the tikz package
% Do not compile this file directly with pdflatex

\begin{figure}[ht]
\centering
\begin{tikzpicture}[
    node distance=1.5cm,
    baseblock/.style={
        rectangle, 
        draw=black!70, 
        rounded corners=3pt,
        text width=3cm,
        align=center,
        minimum height=1cm,
        fill=#1
    },
    annotation/.style={
        font=\small\itshape,
        text width=2.2cm,
        align=center
    }
]
    \node[baseblock, fill=blue!15] (user) {User};
    \node[baseblock, fill=green!15, right=3cm of user] (app) {DApp};
    \node[baseblock, fill=orange!15, below=2cm of app] (gasbank) {Gas Bank Service};
    
    \draw[connector] (user) -- node[annotation, above] {Deposit Funds} (app);
    \draw[connector] (app) -- node[annotation, right] {Request Gas Payment} (gasbank);
    \draw[connector] (gasbank) -- node[annotation, left] {Gas Receipt} (app);
    \draw[connector] (app) -- node[annotation, below] {Transaction Confirmation} (user);
    
    \node[annotation, below=0.5cm of gasbank] (note) {
        \begin{itemize}
        \item[] \footnotesize
        \item Funds held in escrow
        \item Auto-replenish threshold
        \item Multi-chain support
        \end{itemize}
    };
\end{tikzpicture}
\caption{Gas Banking Operation Flow}
\label{fig:gas-bank-flow}
\end{figure}
