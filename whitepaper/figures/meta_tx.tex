\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    scale=0.9,
    box/.style={rectangle, draw=black!70, rounded corners=3pt, 
               fill=white, text width=3cm, align=center, minimum height=1cm,
               pattern=#1, pattern color=black!20,
               drop shadow={opacity=0.15, shadow xshift=0.5mm, shadow yshift=-0.5mm}},
    arrow/.style={->, >=stealth, thick, draw=black!70},
    dashed_arrow/.style={->, >=stealth, thick, dashed, draw=black!70}
]

% User and Application
\node[box=north east lines] (user) at (-4,3) {User};
\node[box=north west lines] (app) at (0,3) {Application};
\node[box=crosshatch] (meta) at (0,0) {Meta Transaction Service};
\node[box=dots] (gas) at (4,0) {Gas Bank};
\node[box=grid] (blockchain) at (0,-3) {Neo Blockchain};

% Flow arrows
\draw[arrow] (user) -- node[above, font=\footnotesize] {1. Sign Request} (app);
\draw[arrow] (app) -- node[right, font=\footnotesize] {2. Submit Request} (meta);
\draw[arrow] (meta) -- node[above, font=\footnotesize] {3. Pay Gas} (gas);
\draw[arrow] (meta) -- node[right, font=\footnotesize] {4. Submit Transaction} (blockchain);
\draw[dashed_arrow] (blockchain) -- node[left, font=\footnotesize] {5. Confirmation} (meta);
\draw[dashed_arrow] (meta) -- node[left, font=\footnotesize] {6. Result} (app);

% Labels
\node[text width=4cm, align=center] at (0,4.5) {Meta Transaction Flow};

\end{tikzpicture}
\caption{Meta Transaction Service Flow}
\label{fig:meta-tx-flow}
\end{figure}
