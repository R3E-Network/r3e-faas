\begin{figure}[ht]
    \centering
    \begin{tikzpicture}
        % Top Layer - Smart Contracts
        \node[box=north east lines, text width=12cm] (smartcontracts) at (0,6) {Neo Smart Contracts};
        
        % Middle Layer - Service Layer Components
        \node[box=crosshatch, text width=2.5cm] (function) at (-6,3) {Function Service};
        \node[box=dots, text width=2.5cm] (secret) at (-3,3) {Secret Service};
        \node[box=grid, text width=2.5cm] (sandbox) at (0,3) {Sandbox Service};
        \node[box=north west lines, text width=2.5cm] (gasbank) at (3,3) {Gas Bank};
        \node[box=north east lines, text width=2.5cm] (metatx) at (6,3) {Meta-TX Service};
        
        % Bottom Layer - External Resources
        \node[cloud] (external) at (0,0) {External Resources};
        
        % Connect Components
        \path [line] (smartcontracts) -- (function);
        \path [line] (smartcontracts) -- (secret);
        \path [line] (smartcontracts) -- (sandbox);
        \path [line] (smartcontracts) -- (gasbank);
        \path [line] (smartcontracts) -- (metatx);
        
        \path [line] (function) -- (external);
        \path [line] (secret) -- (external);
        \path [line] (sandbox) -- (external);
    \end{tikzpicture}
    \caption{Neo Service Layer Architecture}
    \label{fig:nsl-architecture}
\end{figure}
