import { AddMessageListener, JsonRpcConnection, JsonRpcPayload, Logger, PostMessage } from './types';
export declare class PostMessageConnection implements JsonRpcConnection {
    private postMessage;
    private addMessageListener;
    private topic;
    private logger;
    private events;
    private disposer;
    private registering;
    constructor(postMessage: PostMessage, addMessageListener: AddMessageListener, topic?: string, logger?: Logger | null);
    connected: boolean;
    get connecting(): boolean;
    open(): Promise<void>;
    close(): Promise<void>;
    on(event: string, listener: any): void;
    removeListener(event: string, listener: any): void;
    send(payload: JsonRpcPayload, _context?: any): Promise<void>;
    private onMessage;
}
